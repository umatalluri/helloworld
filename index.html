<!DOCTYPE html>
<html>
<head>
    <title>Welcome to MOUSER DEV ENVIRONMENT</title>
    <style>
        body {
            background-color: lightgreen; /* Change to your preferred color */
            font-family: Arial, sans-serif;
        }
        h1 {
            font-size: 36px;
            font-weight: bold;
            text-align: center;
        }
        p {
            font-size: 24px;
            text-align: center;
        }
        .status {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Welcome to MOUSER DEV ENVIRONMENT</h1>
    <div>
        <p>Test Status</p>
        <p>This test succeeded invoking a static Azure web app (DEV) from APIM in NON PROD through Application Gateway.</p>
        
        <p><strong>Subscription:</strong> IBT_US_MCOM_QA_001 (Spoke)</p>
        <p><strong>Network:</strong> Using Private Endpoint (Spoke)</p>
        <p><strong>API:</strong> Configuring App Insights in Hub and sending logs from this Spoke webapp to test the monitoring central solution </p>
        <p><strong>Front End:</strong> This would be deleted once POC is completed </p>

        <!-- Status Sections for Each Site -->
        <div class="status" id="status-qa">Checking connectivity to <strong>QA</strong>...</div>
        <div class="status" id="status-pre">Checking connectivity to <strong>PRE</strong>...</div>
        <div class="status" id="status-dev">Checking connectivity to <strong>DEV</strong>...</div>
    </div>

    <script>
        // List of URLs to test
        const sites = [
            { url: "https://hello-world2-qa.azurewebsites.net/", elementId: "status-qa", name: "QA" },
            { url: "https://hello-world2-pre.azurewebsites.net/", elementId: "status-pre", name: "PRE" },
            { url: "https://hello-world2-dev.azurewebsites.net/", elementId: "status-dev", name: "DEV" }
        ];

        // Function to check connectivity for a given site
        function checkConnectivity(site) {
            fetch(site.url)
            .then(response => {
                if (response.ok) {
                    document.getElementById(site.elementId).innerHTML = `Connectivity to ${site.name} (${site.url}) is <span style="color: green;">GOOD</span>`;
                } else {
                    document.getElementById(site.elementId).innerHTML = `Connectivity to ${site.name} (${site.url}) is <span style="color: red;">BAD</span> (Status: ${response.status})`;
                }
            })
            .catch(error => {
                document.getElementById(site.elementId).innerHTML = `Connectivity to ${site.name} (${site.url}) is <span style="color: red;">BAD</span> (Error: ${error.message})`;
            });
        }

        // Function to check connectivity for all sites
        function checkAllSites() {
            sites.forEach(site => {
                checkConnectivity(site);
            });
        }

        // Check all sites every 5 minutes (300,000 milliseconds)
        setInterval(checkAllSites, 300000); // 5 minutes

        // Initial check on page load
        checkAllSites();
    </script>
</body>
</html>
